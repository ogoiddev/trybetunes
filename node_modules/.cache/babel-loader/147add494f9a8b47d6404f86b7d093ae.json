{"ast":null,"code":"var _jsxFileName = \"/home/ogoidmp/dmpdev/projetos-trybe/sd-019-c-project-trybetunes/src/Pages/ProfileEdit.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../Components/Header';\nimport Loading from './Loading';\nimport './CssPages/ProfileEdit.css';\nimport { getUser, updateUser } from '../services/userAPI';\nimport imgDefault from \"../images/image-alt.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ProfileEdit extends Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.setUserData = async () => {\n      this.setState({\n        userData: await getUser()\n      }, this.validationFillForm);\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.handleFillForm = _ref => {\n      let {\n        target: {\n          name,\n          value,\n          files\n        }\n      } = _ref;\n      this.setState(_ref2 => {\n        let {\n          userData\n        } = _ref2;\n        return {\n          userData: { ...userData,\n            [name]: name === 'image' ? URL.createObjectURL(files[0]) : value\n          }\n        };\n      }, this.validationFillForm);\n    };\n\n    this.validationFillForm = () => {\n      this.setState(_ref3 => {\n        let {\n          userData\n        } = _ref3;\n        return {\n          isDisabled: !Object.entries(userData).filter((_valueKey, i) => i !== 2).every(each => each[1])\n        };\n      });\n    };\n\n    this.handleClickSubmitUser = async function () {\n      let {\n        userData\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state;\n      await updateUser(userData);\n      const {\n        history\n      } = _this.props;\n      history.push('/profile');\n    };\n\n    this.state = {\n      userData: {},\n      isLoading: true,\n      isDisabled: true\n    };\n  }\n\n  componentDidMount() {\n    this.setUserData();\n  }\n\n  render() {\n    const {\n      isLoading,\n      isDisabled,\n      userData: {\n        name,\n        email,\n        image,\n        description\n      }\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        className: \"header-edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(Loading, {\n        className: \"edit-loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-container\",\n        \"data-testid\": \"page-profile-edit\",\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"logoTunes\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: `Foto do perfil de  ${name}`,\n              \"data-testid\": \"edit-input-image\",\n              className: \"image-edit\",\n              onChange: this.handleFillForm,\n              src: image,\n              width: \"100px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"form\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"name\",\n              value: name,\n              placeholder: \"Ajuste seu Nome\",\n              \"data-testid\": \"edit-input-name\",\n              type: \"text\",\n              className: \"name-edit\",\n              onChange: this.handleFillForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"email\",\n              value: email,\n              placeholder: \"Digite seu novo email\",\n              \"data-testid\": \"edit-input-email\",\n              type: \"email\",\n              className: \"email-edit\",\n              onChange: this.handleFillForm,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"image\",\n              type: \"file\",\n              onChange: this.handleFillForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"description\",\n              value: description,\n              placeholder: \"Ajuste seu perfil\",\n              \"data-testid\": \"edit-input-description\",\n              className: \"description-edit\",\n              maxLength: \"300\",\n              onChange: this.handleFillForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              \"data-testid\": \"edit-button-save\",\n              disabled: isDisabled,\n              className: \"button-login\",\n              type: \"button\",\n              onClick: this.handleClickSubmitUser,\n              children: \"Editar perfil\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nProfileEdit.propTypes = {\n  history: PropTypes.shape().isRequired\n};","map":{"version":3,"sources":["/home/ogoidmp/dmpdev/projetos-trybe/sd-019-c-project-trybetunes/src/Pages/ProfileEdit.jsx"],"names":["React","Component","PropTypes","Header","Loading","getUser","updateUser","ProfileEdit","constructor","props","setUserData","setState","userData","validationFillForm","isLoading","handleFillForm","target","name","value","files","URL","createObjectURL","isDisabled","Object","entries","filter","_valueKey","i","every","each","handleClickSubmitUser","state","history","push","componentDidMount","render","email","image","description","propTypes","shape","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../Components/Header';\nimport Loading from './Loading';\nimport './CssPages/ProfileEdit.css';\nimport { getUser, updateUser } from '../services/userAPI';\nimport imgDefault from '../images/image-alt.svg';\n\nexport default class ProfileEdit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userData: {},\n      isLoading: true,\n      isDisabled: true,\n    };\n  }\n\n  componentDidMount() {\n    this.setUserData();\n  }\n\n  setUserData = async () => {\n    this.setState({ userData: await getUser() }, this.validationFillForm);\n    this.setState({ isLoading: false });\n  }\n\n  handleFillForm = ({ target: { name, value, files } }) => {\n    this.setState(({ userData }) => ({\n      userData: {\n        ...userData,\n        [name]: name === 'image'\n          ? URL.createObjectURL(files[0])\n          : value,\n      },\n    }), this.validationFillForm);\n  }\n\n  validationFillForm = () => {\n    this.setState(({ userData }) => ({\n      isDisabled: !Object.entries(userData)\n        .filter((_valueKey, i) => i !== 2)\n        .every((each) => each[1]),\n    }));\n  }\n\n  handleClickSubmitUser = async ({ userData } = this.state) => {\n    await updateUser(userData);\n    const { history } = this.props;\n    history.push('/profile');\n  }\n\n  render() {\n    const { isLoading, isDisabled,\n      userData: { name, email, image, description } } = this.state;\n    return (\n      <div className=\"edit\">\n        <Header className=\"header-edit\" />\n        {isLoading ? <Loading className=\"edit-loading\" />\n          : (\n            <div className=\"form-container\" data-testid=\"page-profile-edit\">\n\n              <section className=\"form-section\">\n                <span className=\"logoTunes\">\n\n                  <img\n                    alt={ `Foto do perfil de  ${name}` }\n                    data-testid=\"edit-input-image\"\n                    className=\"image-edit\"\n                    onChange={ this.handleFillForm }\n                    src={ image }\n                    width=\"100px\"\n                  />\n\n                </span>\n\n                <form className=\"form\">\n\n                  <input\n                    name=\"name\"\n                    value={ name }\n                    placeholder=\"Ajuste seu Nome\"\n                    data-testid=\"edit-input-name\"\n                    type=\"text\"\n                    className=\"name-edit\"\n                    onChange={ this.handleFillForm }\n                  />\n\n                  <input\n                    name=\"email\"\n                    value={ email }\n                    placeholder=\"Digite seu novo email\"\n                    data-testid=\"edit-input-email\"\n                    type=\"email\"\n                    className=\"email-edit\"\n                    onChange={ this.handleFillForm }\n                    required\n                  />\n\n                  <input name=\"image\" type=\"file\" onChange={ this.handleFillForm } />\n\n                  <textarea\n                    name=\"description\"\n                    value={ description }\n                    placeholder=\"Ajuste seu perfil\"\n                    data-testid=\"edit-input-description\"\n                    className=\"description-edit\"\n                    maxLength=\"300\"\n                    onChange={ this.handleFillForm }\n                  />\n\n                  <button\n                    data-testid=\"edit-button-save\"\n                    disabled={ isDisabled }\n                    className=\"button-login\"\n                    type=\"button\"\n                    onClick={ this.handleClickSubmitUser }\n                  >\n                    Editar perfil\n                  </button>\n                </form>\n              </section>\n            </div>)}\n      </div>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.shape().isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}